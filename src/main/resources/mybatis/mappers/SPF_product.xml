<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="SPF_product">

	<select id="get_product_content" parameterType="kr.ac.sungkyul.MDS.vo.MallVo"
		resultType="kr.ac.sungkyul.MDS.vo.ProductListVo">
		<!-- mall_no을 이용해 올바른 상품이름, 가격, 상품 이미지URL 가져오기 -->
				<![CDATA[	
			 select product_name, product_price, productimg_image, productimg_no from 
			 categorylist c FULL OUTER JOIN product p on c.categorylist_no = p.categorylist_no 
			 FULL OUTER JOIN productimg i on p.product_no = i.product_no 
			 where productimg_image is not null and mall_no= #{mall_no } and product_state = 1
			 and productimg_flag = 0 and rownum <= 20 order by productimg_no desc
			 ]]>
	</select>
	
	<select id="get_product_list" parameterType="java.lang.Integer"
		resultType="kr.ac.sungkyul.MDS.vo.CategoryProductListVo">
		<!-- category_no을 이용해 올바른 상품이름, 가격, 상품 이미지URL 가져오기 -->
				<![CDATA[	
			 select product_name, product_price, productimg_image, productimg_no 
			 from product p FULL OUTER JOIN productimg i on p.product_no = i.product_no 
			 where productimg_image is not null and CATEGORYLIST_NO= #{categorylist_no} 
			 and product_state = 1 and productimg_flag = 0 and rownum <= 20 
			 order by productimg_no desc
			 ]]>
	</select>

</mapper>